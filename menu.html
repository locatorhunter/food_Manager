<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunch Manager - Menu</title>
    <link rel="stylesheet" href="css/style.css?v=1.0.0">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCLzX2loYEmPjk0AgH0caHLFBso9yPYTCc",
            authDomain: "foodmanager-19cbb.firebaseapp.com",
            projectId: "foodmanager-19cbb",
            storageBucket: "foodmanager-19cbb.firebasestorage.app",
            messagingSenderId: "853074932493",
            appId: "1:853074932493:web:779a3bd8e5e501cb86f644",
            measurementId: "G-639Z6PMW6R"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Make Firebase available globally
        window.firebaseDB = database;
        window.firebaseRef = (path) => database.ref(path);
        window.firebaseSet = (ref, data) => ref.set(data);
        window.firebaseGet = (ref) => ref.once('value');
        window.firebaseOnValue = (ref, callback) => ref.on('value', callback);
        window.firebasePush = (ref) => ref.push();
        window.firebaseUpdate = (ref, data) => ref.update(data);
        window.firebaseRemove = (ref) => ref.remove();
    </script>
</head>
<body>
    <nav id="navbar"></nav>
    <div id="banner"></div>
    
    <main class="container">
        <h1>Today's Menu</h1>
        
        <section class="menu-section">
            <!-- Compact Search and Filter Bar -->
            <div class="menu-controls">
                <div class="search-filter-bar">
                    <div class="search-input-wrapper">
                        <input type="text" id="menuSearch" placeholder="Search items...">
                    </div>
                    <div class="filter-select-wrapper">
                        <select id="categoryFilter">
                            <option value="">All Categories</option>
                            <option value="Main Course">Main Course</option>
                            <option value="Rice">Rice</option>
                            <option value="Bread">Bread</option>
                            <option value="Curry">Curry</option>
                            <option value="Beverage">Beverage</option>
                            <option value="Dessert">Dessert</option>
                        </select>
                    </div>
                    <div class="size-select-wrapper">
                        <select id="cardSize">
                            <option value="small">Small Cards</option>
                            <option value="medium" selected>Medium Cards</option>
                            <option value="large">Large Cards</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="hotelsMenuContainer"></div>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 Lunch Manager. All rights reserved. | Developed by Vijay</p>
    </footer>
    
    <!-- Item Modal -->
    <div id="itemModal" class="modal" style="display: none;">
        <div class="modal-content item-modal-content">
            <span class="modal-close">&times;</span>
            <div id="itemModalContent"></div>
        </div>
    </div>

    <!-- Order Modal -->
    <div id="orderModal" class="modal" style="display: none;">
        <div class="modal-content order-modal-content">
            <h2>Place Your Order</h2>
            <div class="form-group">
                <label for="orderEmployeeName">Your Name</label>
                <input type="text" id="orderEmployeeName" placeholder="Enter your name" required>
            </div>
            <div class="order-summary-preview">
                <p id="orderPreview"></p>
            </div>
            <div class="modal-actions">
                <button id="confirmOrderBtn" class="btn btn-primary">Place Order</button>
                <button id="cancelOrderBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Group Order Modal -->
    <div id="groupOrderModal" class="modal" style="display: none;">
        <div class="modal-content group-ordering-modal-content">
            <span class="modal-close" onclick="closeGroupOrderModal()">&times;</span>
            <h2>ðŸ‘¥ Create Group Order</h2>
            <div id="groupOrderItemInfo" class="group-ordering-info">
                <!-- Item info will be populated here -->
            </div>
            <div class="group-size-selection">
                <h3>How many people are sharing this order?</h3>
                <div class="participant-count-selector">
                    <button class="count-btn" onclick="adjustGroupOrderParticipantCount(-1)">âˆ’</button>
                    <input type="number" id="groupOrderParticipantCount" class="participant-count-input" value="2" min="2" max="20" readonly>
                    <button class="count-btn" onclick="adjustGroupOrderParticipantCount(1)">+</button>
                    <span class="count-label">people</span>
                </div>
                <div class="group-size-hint">
                    <small id="groupOrderSizeHint">ðŸ’¡ Enter the number of people sharing this order (2-20)</small>
                </div>
            </div>
            <div id="groupOrderParticipantNamesSection" class="participant-names-section" style="display: none;">
                <h3>Enter Participant Names</h3>
                <div id="groupOrderParticipantNamesList" class="participant-names-list">
                    <!-- Name inputs will be added here -->
                </div>
                <div class="cost-breakdown" id="groupOrderCostBreakdown">
                    <!-- Cost breakdown will be shown here -->
                </div>
            </div>
            <div class="modal-actions">
                <button id="confirmGroupOrderBtn" class="btn btn-primary" onclick="confirmGroupOrder()" style="display: none;">Confirm Group Order</button>
                <button class="btn btn-secondary" onclick="closeGroupOrderModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Group Ordering Modal (for cart total exceeding limit) -->
    <div id="groupOrderingModal" class="modal" style="display: none;">
        <div class="modal-content group-ordering-modal-content">
            <span class="modal-close" onclick="closeGroupOrderingModal()">&times;</span>
            <h2>ðŸ’° Amount Limit Exceeded</h2>
            <div id="groupOrderingInfo" class="group-ordering-info">
                <!-- Limit and total info will be populated here -->
            </div>
            <div class="group-size-selection">
                <h3>How many people are ordering together?</h3>
                <div class="participant-count-selector">
                    <button class="count-btn" onclick="adjustParticipantCount(-1)">âˆ’</button>
                    <input type="number" id="participantCount" class="participant-count-input" value="2" min="2" max="20" readonly>
                    <button class="count-btn" onclick="adjustParticipantCount(1)">+</button>
                    <span class="count-label">people</span>
                </div>
                <div class="group-size-hint">
                    <small id="groupSizeHint">ðŸ’¡ Enter the number of people sharing this order (2-20)</small>
                </div>
            </div>
            <div id="participantNamesSection" class="participant-names-section" style="display: none;">
                <h3>Enter Participant Names</h3>
                <div id="participantNamesList" class="participant-names-list">
                    <!-- Name inputs will be added here -->
                </div>
                <div class="cost-breakdown" id="costBreakdown">
                    <!-- Cost breakdown will be shown here -->
                </div>
            </div>
            <div class="modal-actions">
                <button id="confirmGroupOrderingBtn" class="btn btn-primary" onclick="confirmGroupOrdering()" style="display: none;">Place Group Order</button>
                <button class="btn btn-secondary" onclick="closeGroupOrderingModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js?v=1.0.0"></script>
    <script src="js/common.js?v=1.0.0"></script>
    <script src="js/utils.js?v=1.0.0"></script>
    <script src="js/menu.js?v=1.0.0"></script>
</body>
</html>
